{% extends "base.html" %}
{% block content %}
<section class="content_box">
    <h1>People You Follow</h1>
    <p>You follow {{ count }} people.</p>
    <form action="/search" method="get">
        <input type="text" name="q" id="search" placeholder="Search for a feed..." value="{{ q }}">
        <input type="submit" value="Search">
    </form>
    <ul id="results" class="feed">
    </ul>
    {% if feeds %}
        <ul>
            {% for feed in feeds %}
            <li style="display: flex;">
                <div style="flex: 0 75%;">
                    {% if feed[3] and feed[3] != "" %}
                        <img src="{{ feed[3] }}" style="width: 50px; height: 50px; border-radius: 50%; float: left; margin-right: 10px;">
                    {% endif %}
                    {% if feed[4] != None %}
                        <p><a href="{{ feed[1] }}">{{ feed[4] }}</a> (#{{ feed[0] }})</p>
                    {% else %}
                        <p><a href="{{ feed[1] }}">{{ feed[1] }}</a></p>
                    {% endif %}
                </div>
                <div style="flex: 1; text-align: right;" class="following_item">
                    <a onclick="send_unfollow('{{ feed[1] }}', '{{ feed[0] }}')" class="reaction">Unfollow ‚ùå</a>
                    {% if feed[6] == 0 and "mute" in session.get("scope") %}
                    <form action="/mute" method="POST"><input type="hidden" name="channel" value="{{ feed[1] }}">
                        <input type="hidden" name="url" value="{{ feed[1] }}">
                        <input type="hidden" name="action" value="mute">
                        <input type="submit" value="Mute" class="reaction">
                    </form>
                    {% elif feed[6] != 0 and "block" in session.get("scope") %}
                    <form action="/mute" method="POST">
                        <input type="hidden" name="channel" value="{{ feed[1] }}">
                        <input type="hidden" name="url" value="{{ feed[1] }}">
                        <input type="hidden" name="action" value="unmute">
                        <input type="submit" value="Unmute" class="reaction">
                    </form>
                    {% endif %}
                    {% if feed[7] == 0 and "block" in session.get("scope") %}
                    <form action="/block" method="POST">
                        <input type="hidden" name="channel" value="{{ feed[1] }}">
                        <input type="hidden" name="url" value="{{ feed[1] }}">
                        <input type="hidden" name="action" value="block">
                        <input type="submit" value="Block" class="reaction">
                    </form>
                    {% elif feed[7] != 0 and "block" in session.get("scope") %}
                    <form action="/block" method="POST"><input type="hidden" name="channel" value="{{ feed[1] }}">
                        <input type="hidden" name="url" value="{{ feed[1] }}">
                        <input type="hidden" name="action" value="unblock">
                        <input type="submit" value="Unblock">
                    </form>
                </div>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>There are no feeds in this channel.</p>
    {% endif %}
</section>
{% endblock %}